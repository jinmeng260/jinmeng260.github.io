架构设计有三个维度，或者说是我们在考虑架构时需要思考三个方向, 这三个维度分别为面向对象、面向方面、面向服务。

这三个维度可以看作是正交的，但不同维度会互相印证，互相支撑，整个架构的示意图如图所示。
/img/files/2016/jiagou.jpg



## 面向对象

面向对象技术最初是从面向对象的程序设计开始的，它的出现以上世纪60年代Simula语言为标志，并在Smalltalk语言的完善和标准化过程中得到更多的扩展和对以前思想的重新注解。

上世纪80年代中后期，面向对象程序设计逐渐成熟，被计算机界理解和接受，人们又开始进一步考虑面向对象的开发问题。直到现在，面向对象已经成为一种非常流行的编程方式，以及软件设计的架构。

面向对象提出有三个主要目标:重用性、灵活性和扩展性，强调对象的“抽象”、“封装”、“继承”和“多态”。它能让人们以更加接近于现实世界的方式来思考程序，这点可以说是面向对象最大的进步。

在OO思想的运用上，业界出现了很多好的经验与技巧，从而涌现出大量的设计模式，可以说面向对象是系统分析与设计时的一个很重要的方面。

## 面向方面

面向方面最初来源于hook技术，本质上就是满足扩展的需求，可以在程序中自由扩展功能。

面向方面不仅仅是一门编程技术，同样也是一种架构设计的思路。如果说OO是纵向地分析、切割整个系统，那么可以认为AOP是横向地对系统作切片。

简单地理解，OO与AOP分别从两个不同的角度给我们提供了分析系统的思路。面向方面可以弥补面向对象的缺陷，两种方式有机的结合在一起，可以更加有效地对系统进行分析。

我们认为OO是接近于人类认识自然的思维方式，但对于东方而言却并不一定是这样的。

当西方人看到一个复杂系统的时候，只会有一种思路，就是“分解”，将系统分解成一块一块，然后每个部分进行研究。

当东方人看到一个复杂系统的时候，更多地会关注系统中存在的关系，将系统作为一个有机的整体进行研究，这也是东方和西方在事物看法上存在的差异。

这两种思维方式都没有问题，如果结合起来分析问题，解决问题会更好。面向对象与面向方面也同样如此，都能对应到人类认识自然的思维方式上。

## 面向服务

面向服务可以说是最近炒得比较火热的概念。包括现在提到的SaaS（Software as a service），软件即服务。准确而言，面向服务不仅仅是软件行业的概念，这个要从社会的产业结构说起。

社会产业总共分为三个，第一产业农业，第二产业工业，第三产业服务业。最早社会的主要产业是第一产业农业，将近有几万年的历史。

十八世纪下半叶在英国开始的工业革命，对人们的生活产生了根本性的影响，社会的主要产业成了第二产业工业。
现在仍然属于工业时代，或者有人说的“后工业时代”。而在后工业时代，社会的经济体制必定要向第三产业服务业逐渐转型。面向服务其实是社会经济体制重心的一种迁移。

还是说回到软件行业，社会的主要产业将转变成服务业，自然软件行业也会出现对应的变化，那就是这里提到的面向服务。面向服务今后会影响到软件的交付模式，会对整个软件行业的体制产生影响。

而说到架构层面，面向服务是系统发布功能的一种方式。并且基于这种方式下不同的系统之间能有效地通信、协作。常见的实现技术就是Web Service。

## 软件全局观

软件架构设计的三个维度：面向对象、面向方面、面向服务。

最年长的一个维度就是面向对象，发展了好几十年，也是相对而言比较成熟的一个维度。它解决的问题是系统内部结构的设计。
面向方面思想的提出能够弥补面向对象的缺陷。面向对象的方式不能实现横切关注点的分离，而面向方面正是为了解决这个问题。面向方面与面向对象一样都是解决系统内部结构的设计。

面向服务更多的是涉及到系统的外部，简单地说就是发布功能。它并不关注系统内部结构的实现，所以说面向服务与面向对象或者面向方面并不冲突。

这三个维度并不是绝对孤立的，它们之间会互相影响、制约，相互发展的。我们在分析架构的时候需要同时考虑到这三个维度的问题，这样有助于我们设计出更加优秀的架构。







从技术角度来说：软件架构随着技术的革新不断地更新其内容，软件架构建立于当前技术和一些基本原则的基础之上。
基本原则：

分层原则：分层是为了降低软件深度复杂性而使用的关键思想，就像社会有了阶级一样，软件有了层次结构。

模块化原则：模块化是化解软件广度复杂的必然手段，模块化的目的就是让软件分工。

接口实现分离原则随着软件模块化的不断深入改进，面向接口编程而不是面向实现编程可以让复杂度日趋增高的软件降低模块之间的耦合度，从而让各模块更轻松改进。从这个原则出发，软件也从微观进行了细致的规范化。

还有两个比较小但很重要的原则：

细节隐藏原则很显然把复杂问题简化，把难看的细节隐去，能让软件结构更清晰。其实这个原则使用很普遍，java/c++语言中的封装原则以及设计模式中的Facade(外观)模式就很能体现这个原则的精神。

依赖倒置原则随着软件结构的进一步发展,层与层之间、模块与模块之间的依赖逐渐加深，而层、模块的动态可插拔要求不端增大。依赖倒置原则可看视 为接口实现分离原则的深化，根据此原则的精神，软件进入了工具时代。这个原则有点类似于知名的好莱坞法则：Don't call us, we'll call you。

以上这些原则奠定了我们的软件架构的价值指标。但软件架构毕竟是建立在当前技术之上的。而每一代技术都有架构模式。




面向对象是当前最流行开发技术，且设计模式的大量使用使面向对象的走向成熟，而数据库是当前最有效的存储结构、web界面是当前最流行的用 户接口，所以当前最典型的三层次架构就架构在以上几项技术的基础之上，用数据库作存储层、用面向对象来实现业务层、用web来作为用户接口层。我们从三层 次架构谈起：

因为面向对象技术和数据库技术不适配，所以在标准三层次架构的基础上，我们增加了数据持久层，来管理O-R双向映射。

在业务层,因为当前业务日趋负载，且变动频繁，所以我们必须有足够敏捷的技术来保证我们的适应变化的能力，xxx对业务架构影响小，所以推荐作为中间层业务框架。

在用户结构层,虽然servlet/jsp/jstl/javaBean 能够实现MVC架构,但终究过于粗糙。struts对MVC架构的实现就比较完美，Taperstry也极好地实现MVC架构，且采用基于事件的方式，非 常诱人，惜其不够成熟，我们仍旧推荐struts作为用户接口层基础架构。

因为业务层是三层次架构中最有决定意义的，所以让我们回到业务层细致地分析一下，在复杂的业务我们常常需要以下基础服务的一种或几种：
事务一致 性服务acid、
并发加锁服务concurrent&&lock、
池化管理服务cache、
访问控制服务、
流程控制服务workflow、
动态实现服务IOC，
串行化消息服务、
负载平衡服务blance等。如果我们不采用重量级应用服务器(如weblogic,websphere,jboss等)及重量级组件(EJB)，我们必须自己实现其中一些服务。虽然我们大多情况下，不需要所有这些服务，但实现起来却非易事。幸运的是我们有大量的开源实现代码,但采用开源代码却常常是件不轻松的事。








